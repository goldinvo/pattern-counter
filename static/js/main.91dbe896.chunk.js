(this["webpackJsonppattern-counter"]=this["webpackJsonppattern-counter"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),i=n(9),r=n.n(i),o=(n(14),n(8)),c=n(3),u=n(4),h=n(1),d=n(6),l=n(5),p=(n(15),n(0));var f=function(e){return Object(p.jsxs)("form",{onSubmit:e.onSubmit,className:"PatternForm",children:[Object(p.jsx)("label",{children:"Input Pattern Below: "}),Object(p.jsx)("textarea",{value:e.value,onChange:e.onChange}),Object(p.jsx)("input",{type:"submit",value:"Submit"})]})},b=Object.freeze({INSTR_CNT:"instrcnt",INFO:"info",NUM:"num",STR:"str",OPN_PAREN:"opnparen",CLS_PAREN:"clsparen",REP:"rep",SEP:"sep"});function x(e){return e.match(/^\d+\.$/)?b.INSTR_CNT:e.match(/(\(.*?\))/)?b.INFO:"("===e||"{"===e||"["===e?b.OPN_PAREN:")"===e||"}"===e||"]"===e?b.CLS_PAREN:"*"===e?b.REP:","===e||"."===e?b.SEP:e.match(/^\d+$/)?b.NUM:b.STR}var v=function(e,t){return{type:e,value:t}};var j=function(e){var t=[],n=0;e.instruction.forEach((function(a,s){a.type===b.OPN_PAREN?s<e.tokIndex?t.push(s):n++:a.type===b.CLS_PAREN&&(s<e.tokIndex?t.pop():n?n--:t.push(s))}));var a=0,s=[],i=e.instruction.map((function(n,i){var r=i===e.tokIndex?"focusedText ":"";return t.includes(i)&&(n.type===b.OPN_PAREN?(r+=e.colors[a],s.push(e.colors[a]),a+1<e.colors.length&&a++):r+=s.pop()),Object(p.jsx)("span",{className:r,children:n.value+" "},i)}));return Object(p.jsx)("div",{className:"instructionText",children:i})};n(17);var m=function(e){return Object(p.jsxs)("div",{className:"counter "+e.color,children:[Object(p.jsxs)("form",{children:[Object(p.jsx)("label",{htmlFor:"counterInput",children:e.name}),Object(p.jsx)("input",{type:"text",maxLength:"3",autoComplete:"off",id:"counterInput",value:e.value,onChange:e.onChange})]}),e.controls?e.controls:null]})},O=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={count:"0"},e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.increment=e.increment.bind(Object(h.a)(e)),e.reset=e.reset.bind(Object(h.a)(e)),e.onKeyPressed=e.onKeyPressed.bind(Object(h.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyPressed)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyPressed)}},{key:"onKeyPressed",value:function(e){if("TEXTAREA"!==e.target.tagName)switch(e.key){case"z":this.increment(1);break;case"x":this.increment(10);break;default:return}}},{key:"handleChange",value:function(e){var t=e.target.value;t.match(/\D/)||(t=parseInt(t),this.setState({count:t||""}))}},{key:"increment",value:function(e){var t=Number(this.state.count)+e;this.setState({count:t<=999?""+t:""+(t-999-1)})}},{key:"reset",value:function(){this.setState({count:"0"})}},{key:"render",value:function(){var e=this,t=Object(p.jsxs)("div",{id:"controls",style:{display:"flex",justifyContent:"center"},children:[Object(p.jsx)("button",{type:"button",onClick:function(){return e.increment(1)},children:"+1 (z)"}),Object(p.jsx)("button",{type:"button",onClick:function(){return e.increment(10)},children:"+10 (x)"}),Object(p.jsx)("button",{type:"button",onClick:this.reset,children:"Reset"})]});return Object(p.jsx)("div",{className:"manual-counter",children:Object(p.jsx)(m,{name:"Manual Counter",onChange:this.handleChange,value:this.state.count,controls:t})})}}]),n}(a.Component),N=(n(18),["red","orange","yellow"]);var I=function(e){var t=e.repeats.map((function(t,n){var a=n<N.length?N[n]:N[N.length-1];return Object(p.jsx)(m,{color:a,name:"Repeat Counter ".concat(n+1),value:t.numRepeats,onChange:function(t){e.onRepeatChange(n,t)}},n)}));return Object(p.jsxs)("div",{className:"instructionView",children:[Object(p.jsx)(j,{instruction:e.instruction,tokIndex:e.tokIndex,colors:N}),Object(p.jsxs)("div",{className:"countersContainer",children:[t,Object(p.jsx)(O,{})]})]})},y=function(){var e=Object.freeze({NO_INPUT:"Please input a pattern",PAREN_MATCH:"One of the instructions has a mismatched count of open and closed parenthesis"});return{tokenize:function(e){var t=e.trim().split("\n").filter((function(e){return""!==e.trim()})).map((function(e){return e.trim().split(/([(){}[\].,*])/).map((function(e){return e.trim()})).filter((function(e){return""!==e}))}));return t=t.map((function(e){return function(e){var t=[],n=0;x(e[0]+e[1])===b.INSTR_CNT&&(t.push(v(b.INSTR_CNT,e[0]+e[1])),n+=2);for(;n<e.length;){var a=x(e[n]);if(a===b.OPN_PAREN){var s=e[n]+e[n+1],i=e[n]+e[n+1]+e[n+2];if(x(s)===b.INFO){t.push(v(b.INFO,s)),n+=2;continue}if(x(i)===b.INFO){t.push(v(b.INFO,i)),n+=3;continue}}t.push(v(a,e[n])),n++}return t}(e)}))},isInvalid:function(t){if(!t[0]||!t[0][0])return e.NO_INPUT;var n=!0;return t.forEach((function(e){0!==e.reduce((function(e,t){return t.type===b.OPN_PAREN?e++:t.type===b.CLS_PAREN&&e--,e}),0)&&(n=!1)})),!n&&e.PAREN_MATCH},PTN_ERR:e}}();n(19);function k(e){var t,n,a,s=e.pattern,i=e.instrIndex,r=e.tokIndex,o=e.finished,c=e.repeats.slice();s[i][r].type===b.OPN_PAREN?(c.push({index:r,numRepeats:0}),r++):s[i][r].type===b.CLS_PAREN?(t=s[i],n=r,a=c[c.length-1].numRepeats,t[n].type!==b.CLS_PAREN&&console.log("fxn needToRepeat!!!!!"),t[n+1]&&t[n+1].type!==b.REP||!t[n+2]||t[n+2].type!==b.NUM||a<Number(t[n+2].value)-1?(r=c[c.length-1].index+1,c[c.length-1].numRepeats++):(c.pop(),r++)):r++,s[i][r]||(i>=s.length-1?(r=e.tokIndex,c=e.repeats.slice(),o=!0):(i++,r=0)),e.pattern=s,e.instrIndex=i,e.tokIndex=r,e.repeats=c,e.finished=o}function R(e){var t=e.instrIndex,n=e.tokIndex,a=JSON.parse(JSON.stringify(e.repeats));do{k(e)}while(e.pattern[e.instrIndex][e.tokIndex].type!==b.STR&&!e.finished);e.finished&&(e.instrIndex=t,e.tokIndex=n,e.repeats=a)}var g=function(e){Object(d.a)(n,e);var t=Object(l.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={patternInput:"",pattern:void 0,instrIndex:0,tokIndex:0,finished:!1,repeats:[]},e.handleFormChange=e.handleFormChange.bind(Object(h.a)(e)),e.handleFormSubmit=e.handleFormSubmit.bind(Object(h.a)(e)),e.next=e.next.bind(Object(h.a)(e)),e.nextInstruction=e.nextInstruction.bind(Object(h.a)(e)),e.finishRepeat=e.finishRepeat.bind(Object(h.a)(e)),e.addRepeat=e.addRepeat.bind(Object(h.a)(e)),e.handleRepeatChange=e.handleRepeatChange.bind(Object(h.a)(e)),e.onKeyPressed=e.onKeyPressed.bind(Object(h.a)(e)),e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyPressed)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyPressed)}},{key:"onKeyPressed",value:function(e){if("TEXTAREA"!==e.target.tagName&&void 0!==this.state.pattern)switch(e.key){case" ":e.preventDefault(),this.next();break;case"c":this.state.repeats.length>0&&this.addRepeat();break;case"v":this.state.repeats.length>0&&this.finishRepeat();break;default:return}}},{key:"handleFormChange",value:function(e){this.setState({patternInput:e.target.value})}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var n=y.tokenize(this.state.patternInput),a=y.isInvalid(n);a?alert("Pattern Syntax Error: "+a+"."):this.setState({pattern:n,instrIndex:0,tokIndex:0,finished:!1,repeats:[]},(function(){n[0][0].type!==b.STR&&t.next()}))}},{key:"next",value:function(){this.setState((function(e){var t={pattern:e.pattern,instrIndex:e.instrIndex,tokIndex:e.tokIndex,repeats:JSON.parse(JSON.stringify(e.repeats)),finished:e.finished};return R(t),Object(o.a)({},t)}))}},{key:"addRepeat",value:function(){this.setState((function(e){var t={pattern:e.pattern,instrIndex:e.instrIndex,tokIndex:e.tokIndex,repeats:JSON.parse(JSON.stringify(e.repeats)),finished:e.finished},n=t.repeats.length-1,a=t.repeats[n].numRepeats;do{R(t)}while(!t.finished&&t.repeats[n]&&a===t.repeats[n].numRepeats);return Object(o.a)({},t)}))}},{key:"finishRepeat",value:function(){var e=this,t=this.state.pattern[this.state.instrIndex],n=this.state.tokIndex;do{n++}while(t[n].type!==b.CLS_PAREN);this.setState({tokIndex:n+1,repeats:JSON.parse(JSON.stringify(this.state.repeats.slice(0,-1)))},(function(){t[n+1].type!==b.STR&&e.next()}))}},{key:"nextInstruction",value:function(){var e=this,t=this.state.pattern;if(this.state.instrIndex>=t.length-1)this.setState({finished:!0});else{var n=this.state.instrIndex+1;this.setState({instrIndex:n,tokIndex:0,repeats:[]},(function(){t[n][0].type!==b.STR&&e.next()}))}}},{key:"handleRepeatChange",value:function(e,t){var n=t.target.value;if(!n.match(/\D/)){n=parseInt(n);var a=JSON.parse(JSON.stringify(this.state.repeats));a[e].numRepeats=n||0,this.setState({repeats:a})}}},{key:"render",value:function(){var e=null;return void 0!==this.state.pattern&&(e=Object(p.jsxs)("div",{children:[Object(p.jsx)("div",{children:Object(p.jsx)(I,{instruction:this.state.pattern[this.state.instrIndex],tokIndex:this.state.tokIndex,repeats:this.state.repeats,onRepeatChange:this.handleRepeatChange})}),Object(p.jsxs)("div",{className:"button-menu",children:[Object(p.jsx)("button",{onClick:this.next,children:"Next (Space)"}),Object(p.jsx)("button",{onClick:this.nextInstruction,children:"Next Instruction"}),this.state.repeats.length>0?Object(p.jsx)("button",{onClick:this.addRepeat,children:"Complete Repeat (c)"}):null,this.state.repeats.length>0?Object(p.jsx)("button",{onClick:this.finishRepeat,children:"Exit repeat (v)"}):null]})]})),Object(p.jsxs)("div",{children:[e,Object(p.jsx)(f,{value:this.state.patternInput,onChange:this.handleFormChange,onSubmit:this.handleFormSubmit})]})}}]),n}(a.Component);r.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(g,{})}),document.getElementById("root"))}],[[20,1,2]]]);
//# sourceMappingURL=main.91dbe896.chunk.js.map